<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Placar de Dominó</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="favicon.ico">
      <style>
    :root {
      --cor-de-fundo-dupla1: #1E88E5;  /* Azul vibrante */
      --cor-de-texto-dupla1: #FFFFFF;  /* Branco */

      --cor-de-fundo-dupla2: #E53935;  /* Vermelho vibrante */
      --cor-de-texto-dupla2: #FFFFFF;  /* Branco */
      
      --cor-do-fundo-principal: #121212;  /* Preto */
      --cor-do-fundo-header: #1C1C1C;  /* Cinza muito escuro */

      --cor-de-fundo-botao-dupla1: #42A5F5;  /* Azul claro */
      --cor-de-fundo-botao-dupla2: #EF5350;  /* Vermelho claro */

      --cor-texto-principal: #E0E0E0;  /* Cinza claro */
      --cor-texto-secundario: #B0B0B0;  /* Cinza médio */

      --familia-da-fonte: 'Open Sans', sans-serif;
      
      --sombra-dos-elementos: 0 0.375rem 1.25rem rgba(0, 0, 0, 0.1);
      --raio-da-borda-botao: 0.625rem;
      --espacamento-interno-botao: 0.875rem;

      --duracao-transicao-efeito: 0.1s;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      width: 100%;
      height: 100%;
      font-family: var(--familia-da-fonte);
      background: var(--cor-do-fundo-principal);
      user-select: none;
      line-height: 1.5;
      font-size: 16px;
    }

    .container-principal {
      display: flex;
      flex-direction: column;
      height: 100%;
      padding: 0.625rem;
      gap: 0.625rem;
    }

    .cartao-da-dupla {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      padding: 1.25rem;
      border-radius: var(--raio-da-borda-botao);
      border: 0.03125rem solid rgba(0, 0, 0, 0.1);
      box-shadow: var(--sombra-dos-elementos);
      position: relative;
      flex: 1;
      background-color: var(--cor-de-fundo-dupla1);
      transition: box-shadow var(--duracao-transicao-efeito);
    }

    .pontuacao-da-dupla {
      font-size: 4.5rem;
      font-weight: bold;
      margin: auto 0;
      transition: color var(--duracao-transicao-efeito);
      color: var(--cor-de-texto-dupla1);  /* Ajustando a cor do texto para melhor contraste */
    }

    .container-botoes-pontuacao {
      display: flex;
      gap: 0.875rem;
      justify-content: center;
    }

    .botao-de-pontuacao,
    .botao-desfazer-ultima-pontuacao {
      padding: var(--espacamento-interno-botao);
      border: none;
      border-radius: var(--raio-da-borda-botao);
      cursor: pointer;
      transition: background-color var(--duracao-transicao-efeito), transform 0.1s ease-in-out;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }

    .botao-de-pontuacao {
      min-width: 4.375rem;
      font-size: 1.5rem;
      font-weight: bold;
      background-color: rgba(255, 255, 255, 0.8);  /* Aumentando a opacidade para melhor contraste */
      color: #000000;  /* Preto para maior contraste */
      border: 1px solid rgba(0, 0, 0, 0.1);
    }

    .botao-de-pontuacao[data-carta='1'] {
      background-color: #64B5F6;  /* Azul médio */
    }

    .botao-de-pontuacao[data-carta='2'] {
      background-color: #FF8A80;  /* Vermelho médio */
    }

    .botao-de-pontuacao:active,
    .botao-desfazer-ultima-pontuacao:active {
      transform: scale(0.95);
    }

    .botao-de-pontuacao[data-carta='1']:active {
      background-color: #42A5F5;  /* Azul claro */
    }

    .botao-de-pontuacao[data-carta='2']:active {
      background-color: #EF5350;  /* Vermelho claro */
    }

    .botao-desfazer-ultima-pontuacao {
      position: absolute;
      top: 0.625rem;
      right: 0.625rem;
      width: 2.5rem;
      height: 2.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: rgba(255, 255, 255, 0.8);  /* Aumentando a opacidade para melhor contraste */
      border-radius: 50%;
      filter: brightness(1.1);
      color: #000000;  /* Preto para maior contraste */
      font-size: 1.5rem;  /* Aumentando o tamanho do ícone */
      line-height: 1;  /* Ajustando o alinhamento vertical */
      font-weight: bold;  /* Aumentando a espessura do ícone */
    }

    .botao-desfazer-ultima-pontuacao:active {
      transform: scale(0.95);
    }

    button:focus {
      outline: none;
    }

    @media (orientation: landscape) {
      .container-principal {
        flex-direction: row;
      }
    }

    .pontuacao-da-dupla.atualizada {
      animation: destaque 0.3s ease-in-out;
    }

    @keyframes destaque {
      0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.2);
      }
      100% {
        transform: scale(1);
      }
    }
        </style>
</head>
<body>
  <div id="container-cartoes-duplas" class="container-principal"></div>
  <script>
    const CONFIGURACAO = {
      cores: {
        dupla1: { fundo: '#1E88E5', texto: '#FFFFFF' },
        dupla2: { fundo: '#E53935', texto: '#FFFFFF' },
      },
      pontuacaoValida: [5, 10, 20, 50],
    };

    class Dupla {
      constructor({ id, nome, corFundo, corTexto }) {
        this.id = id;
        this.nome = nome;
        this.corFundo = corFundo || CONFIGURACAO.cores.dupla1.fundo;
        this.corTexto = corTexto || CONFIGURACAO.cores.dupla1.texto;
        this.pontuacao = 0;
        this.historicoPontuacao = [];
      }

      adicionarPontos(pontos) {
        if (CONFIGURACAO.pontuacaoValida.includes(pontos)) {
          this.pontuacao += pontos;
          this.historicoPontuacao.push(pontos);
        }
      }

      desfazerUltimaPontuacao() {
        const ultimaPontuacao = this.historicoPontuacao.pop();
        if (ultimaPontuacao) this.pontuacao -= ultimaPontuacao;
      }

      obterPontuacao() {
        return this.pontuacao;
      }
    }

    class ValidadorPontuacao {
      static validar(pontos) {
        return CONFIGURACAO.pontuacaoValida.includes(pontos);
      }
    }

    class Interface {
      constructor(containerId) {
        this.container = document.getElementById(containerId);
      }

      gerarCartaoDupla(dupla) {
        const cartao = this.criarElementoCartao(dupla);
        this.adicionarBotaoDesfazer(cartao, dupla);
        this.adicionarPontuacao(cartao, dupla);
        this.adicionarBotoesPontuacao(cartao, dupla);
        this.container.appendChild(cartao);
        return cartao;
      }

      criarElementoCartao(dupla) {
        const cartao = document.createElement('div');
        cartao.className = 'cartao-da-dupla';
        cartao.style.backgroundColor = dupla.corFundo;
        return cartao;
      }

      adicionarBotaoDesfazer(cartao, dupla) {
        const botaoDesfazer = document.createElement('button');
        botaoDesfazer.className = 'botao-desfazer-ultima-pontuacao';
        botaoDesfazer.innerHTML = '&#8630;';  /* Unicode para seta curvada para a esquerda */
        botaoDesfazer.addEventListener('click', () => {
          dupla.desfazerUltimaPontuacao();
          this.atualizarPontuacao(cartao, dupla);
        });
        cartao.appendChild(botaoDesfazer);
      }

      adicionarPontuacao(cartao, dupla) {
        const spanPontuacao = document.createElement('span');
        spanPontuacao.className = 'pontuacao-da-dupla';
        spanPontuacao.style.color = dupla.corTexto;
        spanPontuacao.textContent = dupla.obterPontuacao();
        cartao.appendChild(spanPontuacao);
      }

      adicionarBotoesPontuacao(cartao, dupla) {
        const containerBotoes = document.createElement('div');
        containerBotoes.className = 'container-botoes-pontuacao';
        
        CONFIGURACAO.pontuacaoValida.forEach((pontos) => {
          const botao = document.createElement('button');
          botao.className = 'botao-de-pontuacao';
          botao.dataset.valor = pontos;
          botao.textContent = pontos;

          botao.addEventListener('click', (event) => this.handleBotaoPontuacao(event, dupla, cartao));

          containerBotoes.appendChild(botao);
        });

        cartao.appendChild(containerBotoes);
      }

      handleBotaoPontuacao(event, dupla, cartao) {
        const pontos = parseInt(event.target.dataset.valor, 10);
        if (ValidadorPontuacao.validar(pontos)) {
          dupla.adicionarPontos(pontos);
          this.atualizarPontuacao(cartao, dupla);
        }
      }

      atualizarElementoCartao(cartao, seletor, conteudo) {
        const elemento = cartao.querySelector(seletor);
        if (elemento) elemento.textContent = conteudo;
      }

      atualizarPontuacao(cartao, dupla) {
        this.atualizarElementoCartao(cartao, '.pontuacao-da-dupla', dupla.obterPontuacao());
        const elementoPontuacao = cartao.querySelector('.pontuacao-da-dupla');
        elementoPontuacao.classList.add('atualizada');
        setTimeout(() => elementoPontuacao.classList.remove('atualizada'), 300);
      }
    }

    class PlacarDominó {
      constructor(duplasConfig, interfaceUsuario) {
        this.duplas = duplasConfig.map(config => new Dupla(config));
        this.interfaceUsuario = interfaceUsuario;
      }

      iniciar() {
        this.duplas.forEach((dupla) => {
          const cartao = this.interfaceUsuario.gerarCartaoDupla(dupla);
          this.associarEventos(cartao, dupla);
        });
      }

      associarEventos(cartao, dupla) {
        const botaoDesfazer = cartao.querySelector('.botao-desfazer-ultima-pontuacao');
        botaoDesfazer.addEventListener('click', () => {
          this.desfazerPontuacao(dupla);
          this.interfaceUsuario.atualizarPontuacao(cartao, dupla);
        });
      }

      desfazerPontuacao(dupla) {
        dupla.desfazerUltimaPontuacao();
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      const configuracaoDuplas = [
        { id: 'dupla1', nome: 'Dupla 1', corFundo: 'var(--cor-de-fundo-dupla1)', corTexto: 'var(--cor-de-texto-dupla1)' },
        { id: 'dupla2', nome: 'Dupla 2', corFundo: 'var(--cor-de-fundo-dupla2)', corTexto: 'var(--cor-de-texto-dupla2)' }
      ];

      const interfaceUsuario = new Interface('container-cartoes-duplas');
      const placarDominó = new PlacarDominó(configuracaoDuplas, interfaceUsuario);
      placarDominó.iniciar();
    });
        </script>
    
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js').then(function(registration) {
                console.log('Service Worker registrado com sucesso:', registration);
            }).catch(function(error) {
                console.log('Falha ao registrar o Service Worker:', error);
            });
        }
    </script>
</body>
</html>
